services:
  web:
    build: .
    # image: qawamis:latest # docker save -o qawamis.tar qawamis:latest; docker load qawamis.tar
    container_name: qawamis
    ports:
      - "3000:3000"
    environment:
      RAILS_ENV: production
      RAILS_SERVE_STATIC_FILES: true
    volumes:
      - ./config/database.yml:/app/config/database.yml
      - ./config/secrets.yml:/app/config/secrets.yml
      - ./db/database.sqlite3:/app/db/database.sqlite3
      - ./log:/app/log
      - ./tmp:/app/tmp
      - ./images:/app/public/images/books:ro
    restart: unless-stopped
